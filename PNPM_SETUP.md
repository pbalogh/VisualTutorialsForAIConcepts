# pnpm Workspace Setup for Tutorials

## Summary
Successfully migrated `~/clawd/tutorials/generated/` to a **pnpm monorepo** with shared dependencies.

### What Changed
- **Before:** Each tutorial had its own `node_modules` (~25-50MB per tutorial, lots of duplication)
- **After:** Single shared `node_modules` at root (44MB total), individual tutorials have only symlinks (8-12KB each)

### Disk Savings
Total tutorials folder: **45MB** (down from ~50-70MB with separate node_modules)

## Files Created/Modified

### `/tutorials/generated/package.json`
Root workspace config that declares all tutorials as workspace packages.
- Lists shared dependencies like `@emotion/is-prop-valid`
- Sets `packageManager: pnpm@10.28.2` for consistency

### `/tutorials/generated/pnpm-workspace.yaml`
pnpm workspace declaration (preferred over `package.json` workspaces field).
- Packages: `matrix-discovery`, `matrix-from-vectors`
- Ready for `overrides` section if version pinning needed

### `/tutorials/generated/.npmrc`
Registry configuration to use public npm registry:
```
registry=https://registry.npmjs.org/
```

### `/tutorials/generated/pnpm-lock.yaml`
Lock file auto-generated by pnpm. Commit this for reproducible installs.

## How It Works

1. **Shared node_modules at root:** All common deps (react, vite, react-dom, etc.) installed once
2. **Workspace symlinks:** Each tutorial has `node_modules/.pnpm` symlinks pointing to root `.pnpm` store
3. **Adding new deps:**
   - To a specific tutorial: `cd matrix-from-vectors && pnpm add <package>`
   - To root (shared): `cd ../.. && pnpm add <package>`

## Development

**Run dev server for a tutorial:**
```bash
cd ~/clawd/tutorials/generated/matrix-from-vectors
pnpm run dev --port 5174
```

**Build a tutorial:**
```bash
pnpm run build
```

**Install all (from root):**
```bash
cd ~/clawd/tutorials/generated
pnpm install
```

## Adding New Tutorials

1. Create new tutorial directory with `package.json`
2. Add to `pnpm-workspace.yaml` packages list
3. Run `pnpm install` from root

## Current Status
- ✅ matrix-from-vectors: Dev server running (port 5175, shared deps loaded)
- ✅ Shared dependencies at root
- ✅ Both tutorials can independently run dev/build scripts

## Next Steps
- **Resume matrix-from-vectors development** (dev server already running on port 5175)
- Add note in tutorial creation process to automatically register new tutorials in `pnpm-workspace.yaml`
- Consider updating SKILL.md with pnpm-aware instructions
